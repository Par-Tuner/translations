# 微型计算机的黎明：Altair 8800

*2018 年 7 月 22 日*

《大众电子》杂志的订阅者是一群见多识广的人。杂志编辑 Arthur Salsberg 觉得有必要在 [1974 年 12 月刊](https://www.americanradiohistory.com/Archive-Poptronics/70s/1974/Poptronics-1974-12.pdf) 的社论中特别指出这一点。杂志收到了一些读者来信，抱怨最近一篇题为“如何开办家庭电视维修店”的文章，可能会鼓励一大批业余电视技术人员涌入市场，压低专业维修人员的价格，并在此过程中对大家的电视造成巨大损害。Salsberg 认为这种担忧是基于对《大众电子》读者群的误解。他解释说，根据杂志自己的调查，52% 的《大众电子》订阅者是某种类型的电子专业人士，其中有 15 万人在过去 60 天内维修过电视。此外，平均每位《大众电子》订阅者在电子设备上花费了 470 美元 (按 2018 年币值计算为 3578 美元 )，并且拥有诸如 VOMs (万用表 )、VTVMs (真空管电压表 )、电子管测试仪、晶体管测试仪、射频信号发生器和示波器等必备工具。“《大众电子》的读者绝大多数都不是新手，” Salsberg 总结道。

我很惊讶，任何熟悉《大众电子》的人竟然会怀疑它的订阅者。我当然在过去 60 天内没有维修过电视。我的电脑是一个铝块，我从未见过它的内部。然而，1974 年 12 月刊的《大众电子》却刊登了诸如“驻波比：它是什么以及如何处理”和“测试现场：万用表的使用”等文章。甚至连广告都令人望而生畏。其中一则似乎是关于某种立体声系统的广告，大胆宣称“没有任何音响设备能像‘一台集所有功能于一身的四声道设备——即内置 SQ、RM 和 CD-4 唱片解码电路的接收器’那样备受期待。”订阅《大众电子》的普通爱好者，更不用说专业人士了，想必都非常博学。

然而，在 [1975 年 1 月刊](https://www.americanradiohistory.com/Archive-Poptronics/70s/1975/Poptronics-1975-01.pdf) 中，《大众电子》的读者们接触到了一些前所未有的东西。在一个标题为“突破性项目”的下方，杂志封面展示了一个巨大的灰黑色盒子，其前面板上布满了复杂的指示灯和拨动开关。这就是 Altair 8800，号称“世界上第一款能与商用型号媲美的迷你计算机套件”，售价不到 400 美元。尽管被宣传为“迷你计算机”，但 Altair 实际上将成为一类新型计算机中首个取得商业成功的成员，这类计算机最初被称为“微型计算机 (microcomputers)”，最终演变为个人电脑 (PCs)。Altair 体积小巧、价格低廉，普通家庭也能在家中拥有一台。它在《大众电子》杂志上的亮相意味着，正如 Salsberg 在该期杂志中所写的那样，“家用电脑时代——终于——来临了。”

![January 1975 cover of Popular Electronics](https://twobithistory.org/images/jan1975-altair.jpg)

图 1: 1975 年 1 月刊《大众电子》封面

我之前曾简要介绍过 [Altair](https://twobithistory.org/2017/12/02/simulating-the-altair.html)，但我认为 Altair 值得再次探讨。与当时的其他计算机相比，它并非特别强大 (尽管价格便宜得多 )。它也不是第一台采用微处理器 (microprocessor) 芯片的通用计算机——至少有三款基于微处理器的计算机早于它问世。但 Altair 对我们所有人来说，都是一种“原型计算机 (Ur-Computer)”。它是我们现在所用设备系列中的第一台普及型计算机，而 Altair 之前的那些大型机 (mainframes) 和笨重的迷你计算机 (minicomputers) 则完全是另一种机器，它们通过打孔卡片编程，或者很少直接进行交互。Altair 也是一台极其简单的计算机，没有任何操作系统 (operating system)，甚至没有引导加载程序 (bootloader)。除非你为它购买了外围设备 (peripherals)，否则 Altair 实际上就是一个带有前面板开关和指示灯的内存 (RAM) 组。Altair 的简洁性使其成为重新熟悉计算基本概念的绝佳方式，就像那些来自旧模拟世界的人们首次涉足我们的数字世界时所遇到的那样。

## Roberts 和他的公司

Altair 由一家名为微型仪器和遥测系统公司 (Micro Instrumentation and Telemetry Systems, MITS) 的公司设计和制造，该公司总部位于新墨西哥州阿尔伯克基。MITS 由一位名叫 H. Edward Roberts 的男士经营。该公司最初为模型火箭套件制造遥测系统，后来进入计算器市场，该市场在 20 世纪 70 年代初蓬勃发展。集成电路 (integrated circuits) 大幅降低了计算器的成本，突然间，每个工作的美国专业人士都必须拥有一台。但计算器市场竞争异常激烈，到 1974 年初，MITS 已债台高筑。

1974 年将被证明是计算领域的“奇迹之年 (annus mirabilis)”。[^1] 1 月，惠普 (Hewlett-Packard) 推出了 HP-65，这是世界上第一款可编程手持计算器。4 月，英特尔 (Intel) 发布了 Intel 8080，这是其第二款 8 位微处理器，也是第一款广受欢迎的微处理器。接着，7 月，《无线电电子》杂志刊登了一款名为 Mark-8 的自制迷你计算机广告，它采用了英特尔于 1972 年发布的 Intel 8008 微处理器。Mark-8 是有史以来第三台使用微处理器构建的计算机，也是第一台登上杂志封面的计算机。[^2] Mark-8 在《无线电电子》上的亮相促使《大众电子》也寻找自己的迷你计算机项目进行专题报道。

《大众电子》的订阅者实际上在 1974 年 12 月就收到了 1975 年 1 月刊的杂志。[^3] 因此，Altair 的发布为当年的“奇迹之年”画上了句号。Altair 的推出意义重大，因为此前从未有过如此功能齐全的计算机以如此亲民的价格向公众提供。当时最受欢迎的迷你计算机之一 PDP-8，售价高达数千美元。然而，Altair 核心的 Intel 8080 芯片使其功能几乎与 PDP-8 不相上下，甚至更强；8080 支持更广泛的指令集 (instruction set)，Altair 可以扩展到 64KB 内存 (memory)，而标准配置的 PDP-8 通常只有 4KB。Altair 也比 Mark-8 更强大，Mark-8 基于 Intel 8008，只能寻址 16KB 内存。此外，Mark-8 必须由客户仅凭一本手册和印刷电路板 (printed circuit boards) 从零开始组装，而 Altair 则可以购买完全组装好的版本，尽管 MITS 很快就被订单淹没，以至于获得 Altair 的唯一真正方式就是订购其组装套件。

对于许多《大众电子》的读者来说，Altair 是他们进入数字计算世界的第一扇窗。1975 年 1 月刊中介绍 Altair 的文章由 Roberts 和 Altair 的共同设计师 William Yates 撰写。Roberts 和 Yates 不遗余力地用他们的读者——电工和无线电爱好者——所熟悉的术语，解释了数字硬件 (digital hardware) 和计算机编程 (computer programming) 的基本概念。他们写道：“计算机本质上是一种可变硬件。通过改变存储在内存中的位模式 (bit pattern)，硬件可以从一种设备类型转变为另一种。”同时，关于编程，Roberts 和 Yates 写道，其基本概念“足够简单，可以在相对较短的时间内掌握”，但要成为“一名高效的程序员需要大量的经验和创造力”，这在我看来非常正确。文章中包含了一张详细的图表，解释了 Intel 8080 中央处理器 (CPU) 的所有组成电路，尽管读者收到的至少这部分是完全组装好的。它解释了 CPU 和计算机内存单元 (memory unit) 之间的区别、堆栈指针 (stack pointer) 的用途，以及汇编语言 (assembly languages) 和 FORTRAN、BASIC 等高级语言 (higher-level languages) 相对于手动输入机器码 (machine code) 所带来的巨大优势。

事实上，在 1975 年 1 月之前，《大众电子》已经连载了 Roberts 撰写的一个系列文章。该系列被宣传为“数字逻辑 (digital logic)”的短期课程。在 1974 年 12 月刊中，Roberts 引导读者构建了一个“成本非常低的计算机终端 (computer terminal)”，它本质上是一个八进制键盘 (octal keypad)，可以将数值输入到一台 8 位计算机中。在描述键盘的过程中，Roberts 解释了晶体管-晶体管逻辑 (transistor-to-transistor logic) 的工作原理，以及如何构建触发器 (flip-flop)——一种能够“记忆”数字值的电路。Roberts 承诺，这个键盘可以与 Altair 计算机配合使用，而 Altair 计算机将在下个月公布。

目前尚不清楚有多少《大众电子》读者真正构建了这个键盘，但它无疑会是一个非常有用的工具。如果没有键盘或其他输入机制，将数值输入 Altair 的唯一方法就是通过前面板上的开关。前面板有一排 16 个开关，用于设置地址 (address)，以及下面一排 8 个开关，用于控制计算机的操作。16 个开关中最右边的 8 个也可以用来指定要存储在内存中的值。这很合理，因为 Intel 8080 使用 16 位值来寻址 8 位字 (words)。前面板上的 16 个开关每个都代表一个位 (bit)——向上拨代表 1，向下拨代表 0。以这种方式与计算机交互是一种启示 (稍后会详细说明 )，因为 Altair 的前面板是一个真正的二进制接口 (binary interface)。这就像你能够直接接触到“裸机 (bare metal)”一样。

尽管 Altair 的界面对我们今天来说显得陌生，但在当时却并不罕见。例如，PDP-8 的前面板上也有类似的二进制输入机制，尽管 PDP-8 的开关更精致，并且采用了那种迷人的橙色和黄色配色方案，这种配色方案确实应该回归。然而，PDP-8 通常会搭配纸带阅读器 (paper-tape reader) 或电传打字机 (teletype machine) 使用，这使得程序输入变得容易得多。这些输入/输出 (I/O) 设备价格昂贵，这意味着早期大多数 Altair 用户只能使用前面板。你可以想象，通过开关输入长程序是一项繁琐的工作。最终，Altair 可以连接到盒式录音机 (cassette recorder)，程序也可以通过这种方式加载。Bill Gates 和 Paul Allen 在后来成为微软 (Microsoft) 首个商业项目的一次尝试中，也为 Altair 编写了一个 BASIC 版本，MITS 于 1975 年年中获得了授权并发布了它。能够负担得起电传打字机的用户，就可以通过 [纸带将 BASIC 加载到 Altair 中](https://www.youtube.com/watch?v=qv5b1Xowxdk)，并通过文本与他们的 Altair 进行交互。BASIC 在学校里已成为大家最喜欢的入门编程语言，它将成为早期微型计算机时代生产的机器的标准接口。

## z80pack 模拟器

感谢一些互联网人士的努力，特别是 Udo Munk，你现在可以在自己的电脑上运行 Altair 的模拟器。这个模拟器是基于一个模拟 Zilog Z80 CPU 的软件构建的，Zilog Z80 CPU 的设计旨在与 Intel 8080 软件兼容。Altair 模拟器允许你完全通过前面板开关输入程序，就像 Altair 的早期用户必须做的那样。尽管点击开关无法提供像拨动真实开关那样的触觉满足感，但玩 Altair 模拟器是体会二进制人机界面 (binary human/computer interface) 既效率低下又 (至少在我看来 ) 迷人地直接的绝佳方式。

z80pack，Udo Munk 的 Z80 仿真软件包 (emulation package)，可以从 z80pack 网站下载。在 [我上一篇关于 Altair 的文章](https://twobithistory.org/2017/12/02/simulating-the-altair.html) 中有说明如何在 Mac OS 上进行设置。如果你能够编译 FrontPanel 库和 `altairsim` 可执行文件，你应该能够运行 `altairsim` 并看到以下窗口：

![Simulated Altair Front
Panel](https://www.autometer.de/unix4fun/z80pack/altair.png)

图 2: 模拟的 Altair 前面板

默认情况下，至少在我使用的 z80pack 版本 (1.36) 中，Altair 配置了名为 Tarbell 引导只读存储器 (boot ROM) 的东西，我认为它用于加载磁盘映像 (disk images)。实际上，这意味着你无法将值写入 RAM 中的前几个字。如果你编辑文件 `/altairsim/conf/system.conf`，你可以设置一个简单的 Altair，它拥有 16 页 RAM，并且完全没有 ROM 或引导加载程序软件。你还可以使用此配置文件来增加模拟器运行窗口的大小，这很方便。

Altair 的前面板看起来令人生畏，但实际上并没有那么复杂。[Altair 手册](http://www.classiccmp.org/dunfield/altair/d/88opman.pdf) 很好地解释了许多开关和状态指示灯，这个 [YouTube 视频](https://www.youtube.com/watch?v=suyiMfzmZKs) 也是如此。要输入并运行一个简单的程序，你只需要了解几件事。Altair 右上方标有 D0 到 D7 的指示灯显示当前寻址字的内容。标有 A0 到 A15 的指示灯显示当前地址。地址指示灯下方的 16 个开关可用于设置新地址；当“EXAMINE (检查 )”开关向上按下时，数据指示灯会更新以显示新寻址字的内容。通过这种方式，你可以“窥视”内存中的所有字。你还可以将“EXAMINE”开关向下按到“EXAMINE NEXT (检查下一个 )”位置，这会自动检查下一个内存地址，从而大大简化了按顺序窥视字的操作。

要将位模式保存到一个字中，你必须使用最右边的八个标有 0 到 7 的开关来设置位模式。然后将“DEPOSIT (存入 )”开关向上按下。

在 [1975 年 2 月刊](https://www.americanradiohistory.com/Archive-Poptronics/70s/1975/Poptronics-1975-02.pdf) 的《大众电子》中，Roberts 和 Yates 引导 Altair 用户输入了一个小型示例程序，以确保他们的 Altair 正常运行。该程序从内存中加载两个整数，将它们相加，然后将和保存回内存。该程序仅包含六条指令，但这些指令总共涉及 14 个内存字，正确输入需要一些时间。示例程序也以表格形式出现在 Altair 手册中，我在此处进行了复现：

| 地址 | 助记符 | 位模式 | 八进制等效 |
| --- | --- | --- | --- |
| 0 | LDA | 00 111 010 | 0 7 2 |
| 1 | (address) | 10 000 000 | 2 0 0 |
| 2 | (address) | 00 000 000 | 0 0 0 |
| 3 | MOV B, A | 01 000 111 | 1 0 7 |
| 4 | LDA | 00 111 010 | 0 7 2 |
| 5 | (address) | 10 000 001 | 2 0 1 |
| 6 | (address) | 00 000 000 | 0 0 0 |
| 7 | ADD B | 10 000 000 | 2 0 0 |
| 8 | STA | 00 110 010 | 0 6 2 |
| 9 | (address) | 10 000 010 | 2 0 2 |
| 10 | (address) | 00 000 000 | 0 0 0 |
| 11 | JMP | 11 000 011 | 3 0 3 |
| 12 | (address) | 00 000 000 | 0 0 0 |
| 13 | (address) | 00 000 000 | 0 0 0 |

如果你通过开关将上表中每个字输入到 Altair 中，你最终会得到一个程序，它会加载字 128 中的值，将其与字 129 中的值相加，最后将结果保存到字 130 中。每条带有地址的指令所附带的地址都是以最低有效位 (least-significant bits) 优先的方式给出，这就是为什么第二个字节总是清零的原因 (没有地址高于 255 )。一旦你输入了程序并向字 128 和字 129 输入了一些值，你可以短暂地将“RUN (运行 )”开关按下，然后再将其推到“STOP (停止 )”位置。由于程序是循环的，它会每秒重复数千次地将这些值相加并保存总和。不过，总和始终是相同的，所以如果你在停止程序后查看字 130，你应该会找到正确答案。

我不知道 Altair 的普通用户是否曾接触过汇编器 (assembler)，但 z80pack 包含一个。z80pack 的汇编器 `z80asm` 是为 Z80 汇编设计的，因此它使用的助记符 (mnemonics) 完全不同。但由于 Z80 的设计旨在与为 Intel 8080 编写的软件兼容，因此操作码 (opcodes) 都相同，即使助记符不同。因此，为了说明用汇编语言编写相同程序可能是什么样子，这里有一个可以由 `z80asm` 汇编并加载到 Altair 中的版本：

```
        ORG  0000H
START:  LD   A,(80H)   ; 从地址 128 加载。
        LD   B,A       ; 将加载的值从累加器 (A) 移动到寄存器 B。
        LD   A,(81H)   ; 从地址 129 加载。
        ADD  A,B       ; 将 A 和 B 相加。
        LD   (82H),A   ; 将 A 存储到地址 130。
        JP   START     ; 跳转到开始。

```

你可以通过如下方式调用汇编器 (在你编译它之后 )，将其转换为一种名为 Intel HEX 文件 (Intel HEX file) 的格式：

```
$ ./z80asm -fh -oadd.hex add.asm

```

这里的 `-f` 标志，以 `h` 作为参数，指定应输出一个 HEX 文件。然后，你可以使用 `-x` 标志传入 HEX 文件，将程序加载到 Altair 中：

```
$ ./altairsim -x add.hex

```

这会将内存中的前 14 个字设置好，就像你通过开关手动输入了这些值一样。无需再重复所有这些操作，你只需像以前一样使用“RUN”开关即可运行程序。简单多了！

如我所说，我认为没有多少 Altair 用户以这种方式编写软件。一旦 Altair BASIC 可用，编写 BASIC 程序可能就是编程 Altair 最简单的方式了。z80pack 还包含几个 HEX 文件，其中有不同版本的 Altair BASIC；我成功运行的是 4K BASIC 的 4.0 版本，你可以像这样将其加载到模拟器中：

```
$ ./altairsim -x basic4k40.hex

```

如果你打开模拟机器并按下“RUN”开关，你应该会看到 BASIC 开始在你的终端窗口中与你“对话”。它首先会提示你输入可用内存量，这应该是 4000 字节 (bytes)。然后它会问你几个问题，最后显示“OK”提示符，Gates 和 Allen 使用它而不是标准的“READY”来节省内存。从那时起，你就可以直接使用 BASIC 了：

```
OK
PRINT 3 + 4
 7

```

尽管只有 4KB 内存运行 BASIC 并没有给你太多空间，但你可以看出这比使用前面板是一个巨大的进步。

当然，Altair 的能力远不及我们今天可用的家用台式机 (desktops) 和笔记本电脑 (laptops)。即使是不到十年后发布的 Macintosh 这样的产品，与简朴的 Altair 相比，也像是实现了量子飞跃 (quantum leap)。但对于那些购买了套件并组装它的第一批《大众电子》读者来说，Altair 是一台真正功能齐全的计算机，他们可以自己拥有，而且成本低廉 (400 美元 )，只占用半个餐具柜的表面空间。对于那些此前只能通过将 [一叠卡片](https://twobithistory.org/2018/06/23/ibm-029-card-punch.html) 或一卷磁带交给负责实际操作计算机的人来与计算机交互的人来说，这无疑是一件令人惊叹的事情。随后的微型计算机在 Altair 的基础上进行了改进，并迅速变得更易于使用，但从某种意义上说，它们都只是更复杂的 Altair。Altair——其极简主义 (minimalism) 几乎达到了粗野主义 (Brutalist) 的程度——是所有后续计算机的基本蓝图。

如果您喜欢这篇文章，每四周会发布更多类似的文章！请关注 Twitter 上的 [@TwoBitHistory](https://twitter.com/TwoBitHistory) 或订阅 [RSS 源](https://twobithistory.org/feed.xml)，确保您能及时了解新文章的发布。

TwoBitHistory 往期回顾…

> "我邀请你和我一起踏上一段激动人心的旅程，花上你生命中接下来的十分钟，了解一个在过去十年里无人使用的软件。"
> <https://t.co/R9zA5ibFMs>
>
>
>
> — TwoBitHistory (@TwoBitHistory)
> [July 7, 2018](https://twitter.com/TwoBitHistory/status/1015647820353867776?ref_src=twsrc%5Etfw)

[^1]: Paul E. Ceruzzi，《现代计算史》(剑桥，马萨诸塞州：麻省理工学院出版社，2003 年 )，第 226 页。
[^2]: “Mark-8 迷你计算机，”Bryan 的旧电脑，2018 年 7 月 21 日访问，http://bytecollector.com/mark\_8.htm。
[^3]: Paul E. Ceruzzi，《现代计算史》(剑桥，马萨诸塞州：麻省理工学院出版社，2003 年 )，第 226 页。